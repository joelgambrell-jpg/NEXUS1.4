<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Construction Check Sheet</title>

<link rel="stylesheet" href="assets/css/nexus-core.css" />

<style>

/* ================= MATCH RIF LOOK ================= */

body{
  margin:0;
  font-family:system-ui;
  background:url("assets/img/construction-bg.jpg") center/cover no-repeat fixed;
}

body::before{
  content:"";
  position:fixed;
  inset:0;
  backdrop-filter: blur(10px) brightness(.55);
  z-index:-1;
}

/* ===== HEADER BAR (same as RIF) ===== */

.topbar{
  display:flex;
  align-items:center;
  gap:12px;
  padding:14px 24px;
  background:rgba(0,0,0,.65);
  color:#fff;
  backdrop-filter: blur(6px);
}

.topbar .right{
  margin-left:auto;
}

.btn{
  padding:8px 14px;
  border-radius:999px;
  font-weight:700;
  cursor:pointer;
}

/* ===== CARD (exact glass look) ===== */

.card{
  max-width:1300px;
  margin:26px auto;
  background:rgba(255,255,255,.95);
  border-radius:18px;
  padding:24px;
  box-shadow:0 25px 60px rgba(0,0,0,.35);
}

/* ===== TABLE (RIF proportions) ===== */

table{
  width:100%;
  border-collapse:collapse;
  font-size:16px; /* larger */
}

th{
  text-align:left;
  background:#f3f3f3;
  font-weight:800;
  padding:12px;
  position:sticky;
  top:0;
}

td{
  padding:10px;
  border-bottom:1px solid #e5e5e5;
}

input{
  width:100%;
  padding:10px 12px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:16px; /* mobile friendly */
}

/* ===== GREEN HANDOFF ROWS ===== */

.handoff td{
  background:#8bc34a;
  font-weight:800;
}

/* ===== MOBILE ===== */

@media(max-width:900px){
  table{font-size:18px;}
  input{font-size:18px;}
}

</style>
</head>



<body>

<!-- ===== TOP BAR (identical behavior to RIF) ===== -->

<div class="topbar">

  <a id="backBtn" style="color:#fff;text-decoration:none;font-weight:700">← Back to Equipment</a>

  <div class="right">
    <button class="btn" id="addBtn">+ Row</button>
    <button class="btn" id="saveBtn">Save</button>
    <button class="btn" onclick="window.print()">PDF</button>
  </div>

</div>



<div class="card">

<h1>Construction Check Sheet</h1>
<h3 id="equipmentLabel"></h3>

<h2>Construction Items</h2>

<table>
<thead>
<tr>
  <th style="width:45%">Procedure</th>
  <th style="width:15%">Sign Off</th>
  <th style="width:15%">Date</th>
  <th style="width:25%">Notes</th>
</tr>
</thead>
<tbody id="body"></tbody>
</table>

</div>



<script>

/* ===== ROUTING ===== */

const params=new URLSearchParams(location.search);
const eq=params.get("eq")||"";

document.getElementById("equipmentLabel").textContent="Equipment: "+eq;
document.getElementById("backBtn").href="equipment.html?eq="+encodeURIComponent(eq);


/* ===== DATA ===== */

const KEY="construction_rif_style_"+eq;

let rows=JSON.parse(localStorage.getItem(KEY)||"null")||[
  {text:"RIF Completed"},
  {text:"Labels installed by QCX"},
  {text:"Phenolic"},
  {text:"Arc Flash"},
  {text:"QCX → Construction Handoff",handoff:true},
  {text:"Anchored & Leveled"},
  {text:"NETA Tested"},
  {text:"Construction → QCX Final Handoff",handoff:true}
];

const body=document.getElementById("body");


/* ===== RENDER ===== */

function render(){
  body.innerHTML="";

  rows.forEach((r,i)=>{

    const tr=document.createElement("tr");
    if(r.handoff) tr.className="handoff";

    tr.innerHTML=`
      <td><input value="${r.text||""}"></td>
      <td><input value="${r.sign||""}"></td>
      <td><input type="date" value="${r.date||""}"></td>
      <td><input value="${r.notes||""}"></td>
    `;

    const inputs=tr.querySelectorAll("input");

    inputs.forEach(inp=>{
      inp.oninput=()=>{
        r.text=inputs[0].value;
        r.sign=inputs[1].value;
        r.date=inputs[2].value;
        r.notes=inputs[3].value;
        save();
      };
    });

    body.appendChild(tr);
  });
}


/* ===== SAVE ===== */

function save(){
  localStorage.setItem(KEY,JSON.stringify(rows));
}

document.getElementById("saveBtn").onclick=save;

document.getElementById("addBtn").onclick=()=>{
  rows.push({text:"New Item"});
  render();
  save();
};

render();

</script>

</body>
</html>

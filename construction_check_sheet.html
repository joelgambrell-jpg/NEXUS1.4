<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Construction Check Sheet</title>

<style>
:root{
  --bg:#b60000;
  --panel:rgba(255,255,255,0.20);
  --panel2:rgba(0,0,0,0.35);
  --line:rgba(255,255,255,0.22);
  --accent:#00c2ff;
  --handoff:#7ecb55;
}

*{box-sizing:border-box;}
html,body{margin:0;font-family:Arial,Helvetica,sans-serif;color:#fff;background:var(--bg);}

body{
  background:url("transformer.jpg") center/cover no-repeat fixed;
}

/* ===== layout ===== */

.wrap{max-width:1100px;margin:auto;padding:18px;}

.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
}

.backlink{
  font-weight:900;
  color:#fff;
  text-decoration:none;
}

.title{
  text-align:center;
  font-size:36px;
  font-weight:900;
}

.sub{
  text-align:center;
  font-size:18px;
  margin-bottom:18px;
}

/* ===== card ===== */

.card{
  background:var(--panel);
  border-radius:18px;
  padding:18px;
  backdrop-filter:blur(8px);
}

/* ===== buttons ===== */

.btn{
  padding:10px 14px;
  border-radius:999px;
  font-weight:900;
  border:2px solid var(--accent);
  background:#0a0f24;
  color:#3ecbff;
  cursor:pointer;
  margin-right:8px;
}

/* ===== table ===== */

.table-wrap{
  overflow-x:auto;
}

table{
  width:100%;
  border-collapse:collapse;
  min-width:900px;
}

th,td{
  padding:14px 10px;
  border-bottom:1px solid rgba(255,255,255,.14);
}

th{
  position:sticky;
  top:0;
  background:rgba(0,0,0,.35);
  font-size:13px;
  text-transform:uppercase;
}

.cell-input{
  width:100%;
  padding:12px;
  font-size:16px; /* larger */
  font-weight:900;
  border-radius:10px;
}

/* ===== handoff rows ===== */

.handoff td{
  background:var(--handoff);
  color:#000;
  font-weight:900;
}

/* ===== mobile ===== */

@media(max-width:900px){
  th,td{padding:18px 12px;}
  .cell-input{font-size:18px;}
}
</style>
</head>

<body>

<div class="wrap">

<div class="topbar">
  <a id="backBtn" class="backlink">← Back to Equipment</a>
  <div>
    <button class="btn" id="addRow">+ Row</button>
    <button class="btn" id="save">Save</button>
    <button class="btn" onclick="window.print()">PDF</button>
  </div>
</div>

<div class="title">Construction Check Sheet</div>
<div class="sub" id="eqSub"></div>

<div class="card">

<h3>Construction Items</h3>

<div class="table-wrap">
<table>
<thead>
<tr>
  <th style="width:45%">Item</th>
  <th style="width:15%">Sign Off</th>
  <th style="width:15%">Date</th>
  <th style="width:25%">Notes</th>
</tr>
</thead>

<tbody id="tbody"></tbody>
</table>
</div>

</div>
</div>

<script>

const qs=new URLSearchParams(location.search);
const eq=qs.get("eq")||"";

document.getElementById("eqSub").textContent="Equipment: "+eq;
document.getElementById("backBtn").href="equipment.html?eq="+encodeURIComponent(eq);

const KEY="construction_v2_"+eq;
const tbody=document.getElementById("tbody");

let rows = JSON.parse(localStorage.getItem(KEY)||"null") || [
  {text:"RIF Completed"},
  {text:"Labels installed by QCX"},
  {text:"Phenolic"},
  {text:"Arc Flash"},
  {text:"QCX → Construction Handoff", handoff:true},
  {text:"Anchored & Leveled"},
  {text:"NETA Tested"},
  {text:"Construction → QCX Final Handoff", handoff:true}
];

function render(){
  tbody.innerHTML="";

  rows.forEach((r,i)=>{

    const tr=document.createElement("tr");
    if(r.handoff) tr.className="handoff";

    tr.innerHTML=`
      <td><input class="cell-input" value="${r.text||""}"></td>
      <td><input class="cell-input" value="${r.sign||""}"></td>
      <td><input class="cell-input" type="date" value="${r.date||""}"></td>
      <td><input class="cell-input" value="${r.notes||""}"></td>
    `;

    const inputs=tr.querySelectorAll("input");

    inputs.forEach(inp=>{
      inp.oninput=()=>{
        r.text=inputs[0].value;
        r.sign=inputs[1].value;
        r.date=inputs[2].value;
        r.notes=inputs[3].value;
        save();
      };
    });

    tbody.appendChild(tr);
  });
}

function save(){
  localStorage.setItem(KEY,JSON.stringify(rows));
}

document.getElementById("save").onclick=save;

document.getElementById("addRow").onclick=()=>{
  rows.push({text:"New Item"});
  render();
  save();
};

render();

</script>

</body>
</html>
